# 实施任务清单：枪匠系统（武器定制）

**分支**: `001-weapon-customization` | **规范**: [spec.md](./spec.md) | **计划**: [plan.md](./plan.md)

**生成日期**: 2025-11-14
**规范类型**: 功能型（001-*）

---

## 任务概述

本任务清单将 `001-weapon-customization` 的设计产物按用户故事组织，确保每个用户故事独立可审查。根据 plan.md 的产物规划，本功能需要产出4个策划案文档：2个设计文档和2个配置数据表。

**设计产物**：
1. gunsmith-system-design.md - 系统策划文档
2. weapon-modification-flow.md - 武器改造流程说明文档
3. component-config.csv - 组件配置表（约140-150行）
4. skin-config.csv - 涂装配置表（约60-80行）

**用户故事优先级**：
- **P1（MVP必需）**: US1（基础组件改造流程）、US2（组件搜刮与积累）
- **P2（增强功能）**: US3（预设配置与快速切换）、US4（涂装定制与视觉表达）
- **P3（长期内容）**: US5（阵营专属组件与枪匠任务）

---

## 格式说明

任务格式：`- [ ] [TaskID] [P?] [Story?] 描述 文件路径`

- **[P]**：可并行执行（不同文件，无依赖）
- **[Story]**：所属用户故事（US1/US2/US3/US4/US5）
- **文件路径**：必须包含绝对路径

---

## Phase 1: Setup

### 前置验证

- [X] T001 验证 spec.md 存在于 G:\AI\Work\game.designkit.example\gamedesigns\001-weapon-customization\spec.md
- [X] T002 验证 plan.md 存在于 G:\AI\Work\game.designkit.example\gamedesigns\001-weapon-customization\plan.md
- [X] T003 验证 research.md 存在于 G:\AI\Work\game.designkit.example\gamedesigns\001-weapon-customization\research.md
- [X] T004 验证 quickstart.md 存在于 G:\AI\Work\game.designkit.example\gamedesigns\001-weapon-customization\quickstart.md
- [X] T005 验证 pillars.md 存在于 G:\AI\Work\game.designkit.example\.game.design\memory\pillars.md

### 阅读指南

- [X] T006 按顺序阅读设计文档理解设计方向
  - 阅读顺序: spec.md → plan.md → research.md → quickstart.md
  - spec.md: 理解功能愿景和5个用户故事
  - plan.md: 理解需要产出的4个设计产物
  - research.md: 理解6个关键设计决策（数值平衡、兼容性、UX、视觉、阵营、掉落）
  - quickstart.md: 快速参考指南和工作流程

### 目录创建

- [X] T007 创建设计文档目录 G:\AI\Work\game.designkit.example\docs\weapon-customization\

---

## Phase 2: Foundational（无基础任务）

**注意**：游戏设计通常无需基础阶段，直接进入用户故事。

---

## Phase 3: 用户故事 1 - 基础组件改造流程（P1）🎯 MVP

**故事目标**: 实现枪匠系统的核心功能，玩家可以在工作台选择武器、浏览和安装组件、预览属性变化、确认改造，产出系统策划文档和流程说明文档。

**独立测试标准**:
- gunsmith-system-design.md 完整描述了6个槽位系统、组件分类、数值框架、UI/UX设计
- weapon-modification-flow.md 完整描述了7步改造流程、错误处理、新手引导
- 两份文档的设计内容与 spec.md 用户故事1的4个验收场景一致
- 所有设计决策可追溯到 research.md 的研究结论

### 用户故事 1 的设计文档编写

- [X] T008 [P] [US1] 编写系统策划文档（US1核心章节）G:\AI\Work\game.designkit.example\docs\weapon-customization\gunsmith-system-design.md
  - 内容来源: spec.md 功能愿景、FR-001至FR-003 + research.md 研究1（数值平衡）、研究2（兼容性）
  - 已完成章节:
    - ✅ 系统概述: 功能定位、设计目标、核心体验
    - ✅ 槽位系统: 6个核心槽位定义、武器类型槽位配置矩阵、组件分类
    - ✅ 组件系统: 品质分级定义、5维属性系统、品质递进公式、组件示例表
    - ✅ 数值框架: 属性权衡原则、平衡验证方法、有效战斗力指标
    - ✅ 配置管理: 预设配置、自定义配置、切换机制（US2-US5内容一次性完成）
    - ✅ 涂装系统: 品质视觉规范、应用流程
    - ✅ 阵营专属内容: 三大阵营组件特色、枪匠NPC、委托任务
    - ✅ UI/UX设计: 工作台界面布局
    - ✅ 组件获取机制: 获取途径、掉落设计、视觉反馈、库存管理

- [X] T009 [P] [US1] 编写武器改造流程说明文档 G:\AI\Work\game.designkit.example\docs\weapon-customization\weapon-modification-flow.md
  - 内容来源: spec.md 用户故事1的4个验收场景 + research.md 研究3（配置管理UX）
  - 已完成章节:
    - ✅ 流程概览: 改造流程图（7步流程）
    - ✅ 详细步骤: 7步完整流程说明
    - ✅ 特殊流程: 配置快速切换、缺失组件处理、系统推荐应用（US3内容）
    - ✅ 涂装应用流程: 涂装浏览、预览、应用、更换（US4内容）
    - ✅ 错误处理: 兼容性冲突、库存不足、误操作撤销
    - ✅ 新手引导: 首次使用提示、关键操作高亮、系统推荐引导

---

## Phase 4: 用户故事 2 - 组件搜刮与积累（P1）🎯 MVP

**故事目标**: 完善枪匠系统的组件获取机制，玩家可以在危险区域搜刮组件、查看品质、成功撤离后积累库存，补充系统策划文档的组件获取部分。

**独立测试标准**:
- gunsmith-system-design.md 补充了组件获取机制、掉落设计、库存管理章节
- 组件获取设计与 spec.md 用户故事2的4个验收场景一致（蓝光特效、品质提示、库存更新）
- 掉落概率设计可追溯到 research.md 研究6（组件获取频率与掉落概率）

### 用户故事 2 的设计文档编写

- [X] T010 [US2] 补充系统策划文档 - 组件获取与掉落设计 G:\AI\Work\game.designkit.example\docs\weapon-customization\gunsmith-system-design.md
  - 内容来源: spec.md 用户故事2、FR-008 + research.md 研究6（掉落概率表）
  - 已完成章节（已在T008中一次性完成）:
    - ✅ 组件获取机制: 搜刮掉落、任务奖励、商人交易、拆解兑换（第9章）
    - ✅ 掉落设计: 品质掉落概率表（按区域难度分层）、每局预期获取量表
    - ✅ 视觉反馈: 品质光效（蓝光、紫光、金光）、拾取提示、库存更新
    - ✅ 库存管理: 库存上限、筛选排序、搜索功能、收藏功能

---

## Phase 5: 用户故事 3 - 预设配置与快速切换（P2）

**故事目标**: 实现配置管理功能，玩家可以保存和切换不同战斗场景的武器配置，补充系统策划文档和流程说明文档的配置管理部分。

**独立测试标准**:
- gunsmith-system-design.md 补充了配置管理章节（预设配置、自定义配置、切换机制）
- weapon-modification-flow.md 补充了配置切换流程
- 配置管理设计与 spec.md 用户故事3的4个验收场景一致
- 配置切换流程可追溯到 research.md 研究3（配置管理UX最佳实践）

### 用户故事 3 的设计文档编写

- [X] T011 [US3] 补充配置管理系统设计和流程 G:\AI\Work\game.designkit.example\docs\weapon-customization\gunsmith-system-design.md 和 weapon-modification-flow.md（已在T008-T009中完成）
  - 内容来源: spec.md 用户故事3、FR-007 + research.md 研究3（配置管理UX）
  - 补充 gunsmith-system-design.md 章节:
    - 配置管理系统: 系统推荐配置（至少3个）、自定义配置槽位（至少5个）
    - 配置切换机制: 切换流程图、缺失组件处理、替代方案提供
    - 配置UI设计: UI布局图、操作交互、视觉反馈
  - 补充 weapon-modification-flow.md 章节:
    - 配置快速切换流程: 详细步骤（选择配置 → 检查库存 → 自动卸载/安装 → 切换完成）
    - 缺失组件处理流程: 显示缺失列表 → 提供替代方案 → 玩家选择
    - 系统推荐配置应用流程: 查看推荐 → 检查库存 → 一键应用
  - UI设计来源: research.md 研究3的UI布局和流程图

---

## Phase 6: 用户故事 4 - 涂装定制与视觉表达（P2）

**故事目标**: 实现涂装系统，玩家可以为武器应用涂装进行视觉定制，补充系统策划文档和流程说明文档的涂装系统部分。

**独立测试标准**:
- gunsmith-system-design.md 补充了涂装系统章节（品质分级、视觉规范、应用流程）
- weapon-modification-flow.md 补充了涂装应用流程
- 涂装设计与 spec.md 用户故事4的4个验收场景一致
- 涂装品质视觉设计可追溯到 research.md 研究4（涂装视觉设计层次）

### 用户故事 4 的设计文档编写

- [X] T012 [US4] 补充涂装系统设计和流程 G:\AI\Work\game.designkit.example\docs\weapon-customization\gunsmith-system-design.md 和 weapon-modification-flow.md（已在T008-T009中完成）
  - 内容来源: spec.md 用户故事4、FR-005、美术/音效方向 + research.md 研究4（涂装视觉）
  - 补充 gunsmith-system-design.md 章节:
    - 涂装系统: 涂装分类、品质分级、纯美观定位（不影响数值）
    - 涂装品质视觉规范表: 每个品质的视觉特征、材质类型、特效（来自research.md）
    - 涂装应用流程: 选择涂装 → 3D预览 → 应用 → 游戏内可见性
    - 涂装获取途径: 任务奖励、商人交易、击杀/搜刮稀有涂装
  - 补充 weapon-modification-flow.md 章节:
    - 涂装应用流程: 选择"涂装"选项 → 浏览涂装库 → 360度预览 → 应用/移除
    - 涂装更换流程: 无成本更换、立即返回库存、可重复使用
  - 视觉规范来源: research.md 研究4的品质视觉规范表

---

## Phase 7: 用户故事 5 - 阵营专属组件与枪匠任务（P3）

**故事目标**: 实现阵营专属内容，三大阵营各有专属组件和枪匠任务，补充系统策划文档的阵营专属内容部分。

**独立测试标准**:
- gunsmith-system-design.md 补充了阵营专属内容章节（阵营组件特色、枪匠NPC、委托任务）
- 阵营专属设计与 spec.md 用户故事5的4个验收场景一致
- 阵营差异化设计可追溯到 research.md 研究5（阵营专属内容差异化）

### 用户故事 5 的设计文档编写

- [X] T013 [US5] 补充系统策划文档 - 阵营专属内容 G:\AI\Work\game.designkit.example\docs\weapon-customization\gunsmith-system-design.md（已在T008中完成）
  - 内容来源: spec.md 用户故事5、叙事关联 + research.md 研究5（阵营差异化）
  - 必需章节（补充到已有文档）:
    - 阵营专属组件: 三大阵营的组件特色表（秩序同盟/荒野猎人/黎明贸易团）
    - 枪匠NPC设计: 三个阵营枪匠的定位、对话风格、提供的服务
    - 委托任务设计: 每个阵营的任务类型（道德导向/战斗导向/商业导向）、奖励机制
    - 解锁条件: 阵营声望等级要求、专属组件数量控制（3-5个/阵营）
  - 阵营特色来源: research.md 研究5的阵营组件特色表

---

## Phase 8: 配置数据编写 - 组件配置表

**故事目标**: 基于系统策划文档的数值框架，编写完整的组件配置表，包含约140-150个组件的数据配置。

**独立测试标准**:
- component-config.csv 包含11个必需列（ID、名称、品质、槽位、属性1-5、描述、美术资源ID）
- 数据覆盖6个槽位 × 5个品质，每槽位至少3个组件
- 所有组件的属性数值符合 gunsmith-system-design.md 的数值框架
- 品质递进符合 research.md 研究1的品质递进公式

### 配置表编写任务

- [X] T014 [P] 编写组件配置表 - 前端组件（枪口、瞄具、弹匣）G:\AI\Work\game.designkit.example\docs\weapon-customization\component-config.csv
  - 数据量: 约70个组件（枪口20个 + 瞄具30个 + 弹匣20个）
  - 枪口组件: 消音器、补偿器、制退器、混合装置（白色=无、绿色=基础补偿器、蓝色=消音器、紫色=高级制退器、金色=混合装置）
  - 瞄具组件: 机械瞄具、红点、全息、倍镜（白色=机械、绿色=廉价红点、蓝色=高级红点、紫色=全息、金色=4倍小海螺）
  - 弹匣组件: 标准、扩容、快速、精准弹匣
  - 必需列: ID, 名称, 品质, 槽位, 属性1-5, 描述, 美术资源ID

- [X] T015 [P] 编写组件配置表 - 后端组件（握把、附件、枪托）G:\AI\Work\game.designkit.example\docs\weapon-customization\component-config.csv
  - 数据量: 约70个组件（握把25个 + 附件25个 + 枪托20个）
  - 握把组件: 前握把、战术握把、人体工学、竞技、多用途（白色=-5%、绿色=-8%、蓝色=-12%、紫色=-15%、金色=-18%+瞄准）
  - 附件组件: 激光指示器、战术手电、下挂榴弹、辅助瞄具、战术配件
  - 枪托组件: 固定、伸缩、骷髅、战术枪托
  - 必需列: ID, 名称, 品质, 槽位, 属性1-5, 描述, 美术资源ID

---

## Phase 9: 配置数据编写 - 涂装配置表

**故事目标**: 基于系统策划文档的涂装设计规范，编写完整的涂装配置表，包含约60-80个涂装的数据配置。

**独立测试标准**:
- skin-config.csv 包含5个必需列（ID、名称、品质、美术材质ID、描述）
- 数据覆盖5个品质等级，每个品质有足够的涂装选择
- 涂装描述体现品质视觉特征（白色单色 → 金色动态效果）
- 涂装分布符合 plan.md 的数据量估算（60-80个）

### 配置表编写任务

- [X] T016 编写涂装配置表 G:\AI\Work\game.designkit.example\docs\weapon-customization\skin-config.csv
  - 数据量: 约60-80个涂装
  - 品质分布: 白色/绿色15个、蓝色20个、紫色15个、金色10个
  - 必需列: ID, 名称, 品质, 美术材质ID, 描述
  - 额外推荐列: 适用武器类型, 阵营专属, 获取途径, 特效标签
  - 视觉规范来源: research.md 研究4的涂装品质视觉规范表

---

## Phase 10: Polish - 跨领域关注点

**阶段目标**: 确保所有设计文档和配置表的一致性、完整性和设计支柱对齐。

### 一致性和完整性审查

- [X] T017 [P] 审查所有设计产物的一致性和完整性
  - 一致性检查:
    - gunsmith-system-design.md 和 weapon-modification-flow.md 之间无矛盾
    - 配置表的数值与系统文档的数值框架一致
    - 所有文档的设计内容与 spec.md 的用户故事一致
  - 完整性检查:
    - gunsmith-system-design.md 包含所有必需章节（8个主要章节）
    - weapon-modification-flow.md 包含所有流程（基础改造、配置切换、涂装应用）
    - component-config.csv 覆盖6个槽位 × 5个品质（约140-150行）
    - skin-config.csv 覆盖5个品质等级（约60-80行）

### 最终对齐验证

- [X] T018 最终验证所有设计产物与四大设计支柱对齐
  - 支柱1（保证撤离的良性循环）: 组件库存不因死亡丢失，支持恢复路径
  - 支柱2（屯积的正反馈快感）: 组件/涂装收集、品质分级、视觉反馈完整
  - 支柱3（电影级视觉震撼）: 3D展示、涂装系统、工作台氛围设计
  - 支柱4（可接近的硬核体验）: 预设配置降低门槛、6槽位保留深度

---

## 依赖关系

### 用户故事完成顺序

```
Phase 1: Setup (T001-T007)
    ↓
Phase 3: US1 - 基础组件改造流程 (T008-T009) [P1] 🎯 MVP
    ↓
Phase 4: US2 - 组件搜刮与积累 (T010) [P1] 🎯 MVP
    ↓ (可并行)
    ├─→ Phase 5: US3 - 预设配置 (T011) [P2]
    └─→ Phase 6: US4 - 涂装系统 (T012) [P2]
    ↓
Phase 7: US5 - 阵营专属 (T013) [P3]
    ↓
Phase 8: 组件配置表 (T014-T015)
    ↓
Phase 9: 涂装配置表 (T016)
    ↓
Phase 10: Polish (T017-T018)
```

### 任务依赖关系详解

**Setup 阶段（T001-T007）**:
- T001-T005（文件验证）: 无依赖，可并行执行
- T006（阅读指南）: 依赖 T001-T005 完成
- T007（创建目录）: 依赖 T001-T005 完成，可与 T006 并行

**US1 阶段（T008-T009）**:
- T008（系统文档）、T009（流程文档）: 可并行编写（不同文件）

**US2 阶段（T010）**:
- T010: 依赖 T008 完成（补充已有文档）

**US3 阶段（T011）**:
- T011: 依赖 T010 完成，补充两个文档（系统文档+流程文档）

**US4 阶段（T012）**:
- T012: 依赖 T010 完成，补充两个文档（系统文档+流程文档），可与 T011 并行

**US5 阶段（T013）**:
- T013: 依赖 T010、T011、T012 完成（补充已有文档）

**配置表阶段（T014-T015）**:
- T014（前端组件）、T015（后端组件）: 可并行编写，依赖 T008 完成（数值框架已定义）

**涂装表阶段（T016）**:
- T016: 依赖 T012 完成（涂装系统已定义）

**Polish 阶段（T017-T018）**:
- T017（一致性完整性）、T018（对齐验证）: 可并行执行，依赖所有前序任务完成

---

## 并行执行机会

### 可并行任务组

**组1（Setup阶段 - 文件验证）**：
- T001、T002、T003、T004、T005 可同时验证

**组2（Setup阶段 - 准备工作）**：
- T006（阅读指南）和 T007（创建目录）可同时执行

**组3（US1核心设计）**：
- T008（系统文档）、T009（流程文档）可同时编写

**组4（US3配置 + US4涂装）**：
- T011（配置管理）和 T012（涂装系统）可同时补充文档

**组5（组件配置表）**：
- T014（前端组件）、T015（后端组件）可同时填写

**组6（Polish阶段）**：
- T017（一致性完整性）、T018（对齐验证）可同时执行

---

## 实施策略

### MVP范围（最小可行产品）

**优先实施**：仅包含 **P1 用户故事**
- US1 - 基础组件改造流程（T008-T009）
- US2 - 组件搜刮与积累（T010）

**输出**：
- gunsmith-system-design.md（系统概述、槽位系统、组件系统、数值框架、组件获取）
- weapon-modification-flow.md（基础改造流程）

**MVP交付标准**：
- 核心改造功能完整描述
- 组件系统和数值框架清晰定义
- 玩家操作流程清晰可执行
- 无需配置表即可进入原型测试

### 增量交付

**Increment 1**：Setup（T001-T007）
- 验证文件、阅读文档、创建目录

**Increment 2**：US1+US2（MVP核心）（T008-T010）
- 交付系统文档和流程文档的核心内容

**Increment 3**：US3+US4（增强功能）（T011-T012）
- 补充配置管理和涂装系统

**Increment 4**：US5（长期内容）（T013）
- 补充阵营专属内容

**Increment 5**：配置表（T014-T016）
- 产出组件配置表和涂装配置表

**Increment 6**：Polish（T017-T018）
- 一致性和对齐验证

---

## 任务统计

**总任务数**: 18（从33个优化到18个）

**按阶段分组**:
- Setup: 7 任务（T001-T007）
- US1（基础改造，P1）: 2 任务（T008-T009）🎯 MVP
- US2（组件搜刮，P1）: 1 任务（T010）🎯 MVP
- US3（配置管理，P2）: 1 任务（T011）
- US4（涂装系统，P2）: 1 任务（T012）
- US5（阵营专属，P3）: 1 任务（T013）
- 配置表: 3 任务（T014-T016）
- Polish: 2 任务（T017-T018）

**按优先级分组**:
- **P1 (MVP)**: 3个任务（T008-T010）🎯
- **P2 (增强)**: 2个任务（T011-T012）
- **P3 (长期)**: 1个任务（T013）
- **配置表**: 3个任务（T014-T016）
- **其他**: 9个任务（Setup 7 + Polish 2）

**并行机会**:
- Setup: 5个任务可并行（T001-T005）+ 2个任务可并行（T006-T007）
- US1: 2个任务可并行（T008、T009）
- US3+US4: 2个任务可并行（T011、T012）
- 配置表: 2个任务可并行（T014、T015）
- Polish: 2个任务可并行（T017、T018）

---

## 质量检查清单

在完成所有任务后，使用以下清单验证设计产物的质量（由 T017-T018 执行）：

### 设计文档质量

- [ ] gunsmith-system-design.md 包含所有必需章节（8个：系统概述、槽位、组件、数值、获取、配置、涂装、阵营）
- [ ] weapon-modification-flow.md 包含所有流程（基础改造、配置切换、涂装应用）
- [ ] 所有设计决策可追溯到 research.md 的研究结论
- [ ] 所有文档使用统一术语（无术语冲突）

### 配置表质量

- [ ] component-config.csv 包含11个必需列（ID、名称、品质、槽位、属性1-5、描述、美术资源ID）
- [ ] component-config.csv 数据量约140-150行（6槽位 × 5品质）
- [ ] skin-config.csv 包含5个必需列（ID、名称、品质、美术材质ID、描述）
- [ ] skin-config.csv 数据量约60-80行（5品质等级）
- [ ] 所有配置表数值符合系统文档的数值框架

### 设计支柱对齐

- [ ] 支柱1（保证撤离的良性循环）: 组件库存不丢失，支持恢复路径
- [ ] 支柱2（屯积的正反馈快感）: 组件/涂装收集完整
- [ ] 支柱3（电影级视觉震撼）: 3D展示、涂装系统完整
- [ ] 支柱4（可接近的硬核体验）: 预设配置降门槛、6槽位保深度

---

**下一步**: 开始执行 Phase 1（Setup），验证前置文件并创建目录结构。使用 `/game.designkit.implement` 命令逐项完成任务。
