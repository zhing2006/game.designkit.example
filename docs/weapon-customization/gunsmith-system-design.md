# 枪匠系统策划文档

**功能**: 001-weapon-customization | **版本**: 1.0.0
**创建日期**: 2025-11-14 | **游戏**: 归途（The Way Back）

---

## 文档概述

本文档完整描述《归途》枪匠系统的设计方案，包括系统架构、槽位设计、组件系统、数值框架、配置管理、涂装系统、阵营专属内容和UI/UX设计。枪匠系统是武器定制功能，允许玩家通过安装组件改造武器性能，并通过涂装进行视觉定制。

**设计目标**: 在深度和可接近性之间取得平衡，让新手通过预设配置快速上手，让老手通过深度定制优化配置。

**核心体验**: "屯屯鼠"般的组件收集乐趣 + 个性化武器定制 + 战术深度配置

---

## 1. 系统概述

### 1.1 功能定位

枪匠系统是《归途》的核心跨局成长系统，位于"搜刮-战斗-撤离"循环的"跨局准备"环节。玩家在安全区使用枪匠工作台改造武器，通过安装不同组件适配不同战斗风格，通过涂装表达个性化。

**在核心循环中的位置**:
- **短循环（单局）**: 搜刮到稀有组件 → 成功撤离带回 → 产生"下次改造武器"的期待
- **长循环（跨局成长）**: 积累组件库存 → 改造武器 → 测试性能 → 调整配置 → 解锁更高品质组件路径

**设计支柱对齐**:
- 服务于"屯积的正反馈快感"（支柱2）：组件和涂装作为有价值的搜刮物品
- 服务于"可接近的硬核体验"（支柱4）：预设配置降低门槛，深度定制保留硬核

### 1.2 设计目标

**核心目标**:
1. 让玩家通过组件改造实现武器性能的个性化调整
2. 使同一把武器能够适配不同战斗风格（远程狙击/近战突击/平衡多用途）
3. 提供"屯屯鼠"般的组件收集乐趣和渐进式成长路径
4. 通过涂装系统提供视觉表达和个性化满足

**设计平衡点**:
- **深度 vs 可接近性**: 6个核心槽位提供深度，每槽位3-8选择，预设配置降低门槛
- **性能 vs 美观**: 组件影响性能（属性权衡），涂装纯美观（不影响数值）
- **收集 vs 使用**: 组件通过游戏内玩法获得，避免氪金获得性能优势

### 1.3 核心体验

**玩家体验循环**:
1. **搜刮期待**: 在危险区域看到稀有组件的"蓝光"闪烁，产生兴奋感
2. **改造策略**: 返回安全区，在工作台前研究组件搭配
3. **性能测试**: 带新配置进入低难度区域测试手感，调整直到满意
4. **视觉满足**: 为武器换上稀有涂装，展示给其他玩家
5. **持续优化**: 积累更多高品质组件，不断优化配置

**情感目标**:
- **收集满足感**: 看到仓库中越来越多的组件选项，"我有选择权"的掌控感
- **个性化表达**: 通过独特组件搭配和涂装，"这是我的枪"的归属感
- **战术深度**: 不同场景需要不同配置，增加重玩价值
- **渐进式成长**: 从白色基础到金色传说的清晰成长路径

---

## 2. 槽位系统

### 2.1 六大核心槽位

枪匠系统提供6个核心组件槽位，每个槽位独立影响武器的不同属性：

| 槽位 | 英文名 | 影响属性 | 组件类型 |
|------|-------|---------|---------|
| **枪口** | Muzzle | 后坐力控制、射程、噪音 | 消音器、补偿器、制退器、混合装置 |
| **瞄具** | Sight | 精准度、瞄准速度 | 机械瞄具、红点、全息、倍镜 |
| **弹匣** | Magazine | 弹药容量、换弹速度 | 标准、扩容、快速、精准弹匣 |
| **握把** | Grip | 后坐力控制、机动性 | 前握把、战术握把、人体工学握把 |
| **附件** | Attachment | 瞄准辅助、视野 | 激光指示器、战术手电、下挂榴弹 |
| **枪托** | Stock | 后坐力控制、机动性、稳定性 | 固定枪托、伸缩枪托、骷髅枪托 |

### 2.2 武器类型槽位配置矩阵

**重要**: 不同武器类型有不同的槽位配置，不是所有武器都有全部6个槽位。

| 武器类型 | 枪口 | 瞄具 | 弹匣 | 握把 | 附件 | 枪托 | 总槽位 |
|---------|------|------|------|------|------|------|--------|
| **突击步枪** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | 6 |
| **狙击步枪** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | 6 |
| **冲锋枪** | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ | 5 |
| **霰弹枪** | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | 5 |
| **手枪** | ✅ | ✅ | ✅ | ❌ | ✅ | ❌ | 4 |
| **轻机枪** | ✅ | ✅ | ✅ | ✅ | ❌ | ✅ | 5 |

**设计理由**:
- **手枪无枪托**: 手枪是双手持握，无枪托设计
- **手枪无握把**: 手枪的握把是武器本体，无前握把槽位
- **冲锋枪无枪托**: 部分冲锋枪设计无枪托或枪托不可更换
- **霰弹枪无握把**: 霰弹枪的前护木设计不支持独立前握把
- **轻机枪无附件**: 轻机枪重量大，下挂榴弹等附件不适用

### 2.3 组件分类

每个槽位包含多种组件类型，覆盖5个品质等级（白<绿<蓝<紫<金）：

**枪口槽位组件（4类）**:
- 消音器：降低噪音（-50%噪音）但降低射程（-10%射程）
- 补偿器：降低后坐力（-5%至-15%）但增加噪音（+10%至+20%）
- 制退器：降低后坐力（-8%至-18%）且提升精准（+3%至+8%）
- 混合装置：平衡降低后坐力和噪音（金色专属）

**瞄具槽位组件（6类）**:
- 机械瞄具：基础瞄准，无属性加成（白色）
- 红点瞄具：快速瞄准（+5%至+15%瞄准速度）
- 全息瞄具：宽视野快速捕获（+10%至+20%瞄准速度，-5%精准度）
- 2倍镜：中距离精准（+8%精准度）
- 4倍镜：远距离精准（+15%精准度，-10%瞄准速度）
- 热成像瞄具：夜间优势（金色专属）

**弹匣槽位组件（4类）**:
- 标准弹匣：无属性修正
- 扩容弹匣：增加弹药（+30%至+50%容量，-10%换弹速度）
- 快速弹匣：加快换弹（+20%至+40%换弹速度）
- 精准弹匣：提升精准（+5%至+10%精准度）

**握把槽位组件（5类）**:
- 前握把：基础后坐力降低（-5%至-10%）
- 战术握把：中等后坐力降低（-8%至-12%）
- 人体工学握把：优秀后坐力降低（-12%至-15%）
- 竞技握把：顶级后坐力降低（-15%至-18%）
- 多用途握把：平衡后坐力和精准（金色/紫色专属）

**附件槽位组件（5类）**:
- 激光指示器：提升腰射精准（+10%至+20%腰射精准）
- 战术手电：照明但暴露位置
- 下挂榴弹：提供爆炸伤害选项（蓝色以上）
- 辅助瞄具：快速切换备用瞄具
- 战术配件：其他战术辅助

**枪托槽位组件（4类）**:
- 固定枪托：基础后坐力控制（-3%至-8%）
- 伸缩枪托：平衡后坐力和机动（-5%至-10%后坐力，+5%机动）
- 骷髅枪托：高机动性（+10%至+15%机动，-3%后坐力控制）
- 战术枪托：全面提升（金色/紫色专属）

---

## 3. 组件系统

### 3.1 品质分级定义

品质由组件性能决定，而非磨损程度。高品质组件代表更先进的技术和更优秀的性能表现。

| 品质 | 颜色 | 性能定位 | 稀缺度 | 获取途径 |
|------|------|---------|--------|---------|
| **白色** | White | 基础性能 | 常见 | 低难度区域 |
| **绿色** | Green | 改进性能 | 普通 | 低中难度区域 |
| **蓝色** | Blue | 优秀性能 | 稀有 | 中高难度区域 |
| **紫色** | Purple | 专业级性能 | 史诗 | 高危区域、特殊任务 |
| **金色** | Gold | 顶级性能 | 传说 | 最危险区域、Boss掉落 |

**品质示例（瞄具槽位）**:
- 白色: 机械瞄具（基础瞄准，无加成）
- 绿色: 廉价红点（+5%瞄准速度）
- 蓝色: 高级红点（+10%瞄准速度，更清晰视野）
- 紫色: 全息瞄具（+15%瞄准速度，宽视野快速捕获）
- 金色: 4倍小海螺（+12%精准度，快速切换，远程精准）

**品质示例（握把槽位）**:
- 白色: 普通前握把（-5%后坐力）
- 绿色: 战术握把（-8%后坐力）
- 蓝色: 人体工学握把（-12%后坐力）
- 紫色: 专业竞技握把（-15%后坐力）
- 金色: 定制握把（-18%后坐力，+5%瞄准速度）

### 3.2 五维属性系统

枪匠系统使用5个核心属性维度，每个组件最多影响2-3个属性：

| 属性 | 英文名 | 影响内容 | 属性范围 |
|------|--------|---------|---------|
| **后坐力控制** | Recoil Control | 连续射击的准星跳动幅度 | 0-10 |
| **精准度** | Accuracy | 射击散布和命中率 | 0-10 |
| **射程** | Range | 有效射程和伤害衰减 | 0-10 |
| **机动性** | Mobility | 移动速度和切枪速度 | 0-10 |
| **射速** | Fire Rate | 每分钟射击次数（部分组件影响） | 0-10 |

**属性可视化**: 使用雷达图展示5维属性，绿色箭头表示增益，红色箭头表示减益。

### 3.3 属性设计原则

**核心原则**:

1. **属性维度限制**: 每个组件最多影响2-3个核心属性，避免《逃离塔科夫》的15+属性复杂度

2. **权衡设计**: 高品质组件不是"纯增益"，而是"更优的权衡"
   - 白色组件: 单一正向属性，明显负向属性（如 +5%精准 -10%机动）
   - 金色组件: 多重正向属性，轻微负向属性（如 +15%精准 +8%射程 -3%机动）

3. **品质递进**: 同一类型组件，高品质版本的正向属性更高，负向属性更低
   - 示例: 普通前握把（白色）-5%后坐力 vs 定制握把（金色）-18%后坐力+瞄准速度

### 3.4 品质递进公式

基于 research.md 研究1的数值平衡方法论，品质递进遵循以下公式：

| 品质升级 | 正向属性提升 | 负向属性降低 | 示例 |
|---------|-------------|-------------|------|
| 白色 → 绿色 | +60% | -30% | +5%精准 → +8%精准，-10%机动 → -7%机动 |
| 绿色 → 蓝色 | +50% | -40% | +8%精准 → +12%精准，-7%机动 → -4.2%机动 |
| 蓝色 → 紫色 | +30% | -50% | +12%精准 → +15.6%精准，-4.2%机动 → -2.1%机动 |
| 紫色 → 金色 | +20% | -60%或新增正向属性 | +15.6%精准 → +18.7%精准，或新增+射程 |

**平衡验证**:
- 计算"有效战斗力"指标 = 后坐力×0.3 + 精准度×0.25 + 射程×0.2 + 机动性×0.15 + 射速×0.1
- 确保金色组件的有效战斗力不超过白色组件的150%（避免数值碾压）

### 3.5 组件兼容性规则

基于 research.md 研究2的80/20兼容性原则：

**第1层（简单规则，80%组件）**:
- 槽位匹配即兼容：握把槽位只能安装握把组件，瞄具槽位只能安装瞄具
- 无需转接件或依赖检查
- 适用于所有白色/绿色/蓝色组件

**第2层（特殊规则，20%组件）**:
- 某些高倍瞄具（4倍以上）需要"枪托提供稳定性"（枪托槽位必须已安装组件）
- 某些下挂榴弹需要"枪口槽位为空"（物理冲突）
- 适用于部分紫色/金色高级组件

**兼容性检查UI**:
- 不兼容组件在选择时灰显
- 悬停显示原因："该瞄具需要安装枪托以提供稳定性"
- 提供解决方案："建议先安装战术枪托，再安装此瞄具"
- 提供"一键安装推荐配置"自动解决依赖

### 3.6 组件示例表

**握把槽位示例**（覆盖5个品质）:

| ID | 名称 | 品质 | 后坐力控制 | 机动性 | 瞄准速度 | 说明 |
|----|------|------|-----------|--------|---------|------|
| GRIP_001 | 普通前握把 | 白色 | -5% | -8% | - | 基础的前握把设计 |
| GRIP_002 | 战术握把 | 绿色 | -8% | -5% | - | 人体工学改进 |
| GRIP_003 | 人体工学握把 | 蓝色 | -12% | -3% | - | 专业人体工学设计 |
| GRIP_004 | 竞技握把 | 紫色 | -15% | -2% | +3% | 竞技级精密设计 |
| GRIP_005 | 定制握把 | 金色 | -18% | 0% | +5% | 定制加工，完美平衡 |

**瞄具槽位示例**（覆盖5个品质）:

| ID | 名称 | 品质 | 精准度 | 瞄准速度 | 视野 | 说明 |
|----|------|------|--------|---------|------|------|
| SIGHT_001 | 机械瞄具 | 白色 | 0% | 0% | 标准 | 基础机械瞄准 |
| SIGHT_002 | 廉价红点 | 绿色 | +3% | +5% | 标准 | 民用红点瞄具 |
| SIGHT_003 | 高级红点 | 蓝色 | +5% | +10% | 清晰 | 军用级红点 |
| SIGHT_004 | 全息瞄具 | 紫色 | +8% | +15% | 宽视野 | 全息投影瞄具 |
| SIGHT_005 | 4倍小海螺 | 金色 | +12% | +8% | 远程 | 远程精准狙击镜 |

---

## 4. 数值框架

### 4.1 属性权衡原则

**核心原则**: 没有"纯增益"组件，所有组件都有权衡。高品质组件是"更优的权衡"，而非"无代价的增益"。

**权衡模式**:

**模式1 - 专精权衡** (适用于白色/绿色组件):
- 提升一项核心属性
- 降低一项次要属性
- 示例: 普通前握把（-5%后坐力，-8%机动性）

**模式2 - 优化权衡** (适用于蓝色/紫色组件):
- 提升一项核心属性（幅度更大）
- 降低一项次要属性（幅度更小）
- 示例: 人体工学握把（-12%后坐力，-3%机动性）

**模式3 - 多重增益** (适用于金色组件):
- 提升2-3项属性
- 轻微降低一项属性或无负面
- 示例: 定制握把（-18%后坐力，+5%瞄准速度，0%机动性）

### 4.2 品质递进曲线

**正向属性递进**（以后坐力控制为例）:

```
白色: -5%  ───+60%──→  绿色: -8%  ───+50%──→  蓝色: -12%
                                                  ───+30%──→
紫色: -15% ←───────────────────────────────────
   ───+20%──→  金色: -18%（或 -15% + 新增属性）
```

**负向属性递减**（以机动性为例）:

```
白色: -8%  ───-30%──→  绿色: -5.6%  ───-40%──→  蓝色: -3.4%
                                                    ───-50%──→
紫色: -1.7% ←─────────────────────────────────────
   ───-60%──→  金色: -0.7%（或0%）
```

### 4.3 有效战斗力指标

用于平衡验证的综合指标：

**计算公式**:
```
有效战斗力 = 后坐力控制×0.3 + 精准度×0.25 + 射程×0.2 + 机动性×0.15 + 射速×0.1
```

**权重说明**:
- 后坐力控制（30%）：最影响实战表现
- 精准度（25%）：命中率的关键
- 射程（20%）：战术选择的核心
- 机动性（15%）：生存能力
- 射速（10%）：少数组件影响

**平衡标准**:
- 基准武器（无改装）: 有效战斗力 = 5.0
- 全白色组件配置: 有效战斗力 = 5.5-6.0
- 全金色组件配置: 有效战斗力 = 7.5-8.0（不超过基准的150%）

### 4.4 平衡验证方法

**验证步骤**:

1. **单组件验证**: 确保每个组件的属性权衡合理（有正有负）
2. **品质递进验证**: 确保同类型组件的品质递进符合公式
3. **配置验证**: 测试3种典型配置（CQB、中距离、远程），确保无明显占优配置
4. **有效战斗力验证**: 确保金色配置不超过白色配置的150%

**配置测试用例**:
- **CQB配置** (室内近战): 高机动性、快速瞄准、后坐力控制
- **远程配置** (开阔地): 高精准度、高射程、稳定性
- **平衡配置** (多用途): 各属性均衡，无明显短板

---

## 5. 配置管理系统

### 5.1 系统推荐配置

提供至少3个预设配置，降低新手门槛：

| 配置名称 | 设计理念 | 组件配置 | 适用场景 |
|---------|---------|---------|---------|
| **新手友好配置** | 低后坐力、易控制 | 战术握把、红点瞄具、补偿器、扩容弹匣 | 新手玩家、近中距离 |
| **远程精准配置** | 高精准度、远距离 | 精准握把、4倍镜、制退器、精准弹匣、战术枪托 | 开阔地、远程狙击 |
| **近战突击配置** | 高机动性、快节奏 | 轻量握把、红点瞄具、快速弹匣、骷髅枪托 | 室内建筑、CQB |

**预设配置显示**:
- 显示配置理念和适用场景
- 显示所需组件列表和当前库存情况
- 缺少组件时提示"需要搜刮：战术前握把 x1"
- 一键应用（如拥有所有组件）

### 5.2 自定义配置槽位

玩家可以保存至少5个自定义配置，满足不同战斗场景需求：

**配置槽位管理**:
- 配置命名: 玩家自定义，最多20个字符（如"办公楼CQB"、"远程狙击"）
- 配置描述: 可选，玩家备注配置理念
- 配置锁定: 防止误删除常用配置

**配置内容**:
- 记录武器的所有槽位组件选择
- 记录涂装选择（可选）
- 记录配置创建时间和使用次数

### 5.3 配置切换机制

基于 research.md 研究3的UX最佳实践，配置切换流程设计如下：

**切换流程**:
```
1. 玩家选择目标配置
   ↓
2. 系统检查库存（是否拥有所有组件？）
   ├─ YES → 确认切换提示
   │    ↓
   │  3. 自动卸下当前配置所有组件（返回库存）
   │    ↓
   │  4. 自动安装目标配置所有组件（从库存扣除）
   │    ↓
   │  5. 播放切换动画（<3秒）
   │    ↓
   │  6. 切换完成，属性和外观更新
   │
   └─ NO → 显示缺失组件列表
        ↓
      提供选项:
      - "使用其他组件替代"（显示替代品）
      - "取消切换"
```

**缺失组件处理**:
- 标红缺失的组件
- 显示需要数量（如"缺少：精准弹匣 x1"）
- 提供替代方案（显示库存中同槽位的其他组件）
- 允许玩家选择替代品或取消切换

**切换时间目标**: 整个切换过程<3秒，保持流畅不打断玩家节奏

### 5.4 配置UI设计

基于 research.md 研究3的UI布局：

**界面布局**:
- 左侧: 当前武器3D旋转视图
- 中间: 配置列表（系统推荐 + 我的配置）
- 右侧: 配置详情预览（组件列表、属性雷达图）

**交互流程**:
1. 选择武器 → 进入配置管理界面
2. 查看系统推荐或我的配置
3. 点击配置 → 显示详细信息
4. 点击"应用"或"切换" → 执行切换流程
5. 切换完成 → 返回工作台主界面

---

## 6. 涂装系统

### 6.1 涂装分类和品质

涂装系统提供纯美观的武器外观定制，不影响任何武器属性。

**品质分级（影响美观程度和稀有度）**:

| 品质 | 视觉特征 | 材质类型 | 特效 |
|------|---------|---------|------|
| **白色** | 单色、基础质感 | 哑光金属/塑料 | 无 |
| **绿色** | 双色、简单图案 | 哑光金属 | 无 |
| **蓝色** | 多色、定制图案 | 磨砂金属/渐变 | 无 |
| **紫色** | 复杂艺术图案 | 特殊材质（金属光泽、碳纤维） | 细节光泽 |
| **金色** | 传说级图案 | 顶级材质（全息、珠光、发光） | 动态效果 |

**涂装示例**:
- 白色: "单色黑"、"军绿色"（单色喷涂）
- 绿色: "基础迷彩"、"条纹图案"（简单双色）
- 蓝色: "都市迷彩"、"渐变蓝"（定制图案）
- 紫色: "荒野烈焰"、"龙纹"（复杂艺术图案，红黄渐变）
- 金色: "传奇龙纹"、"全息幽灵"（动态全息效果，发光边缘）

### 6.2 涂装视觉规范

基于 research.md 研究4的涂装视觉设计层次：

**视觉递进**:
1. **图案复杂度递进**: 白色单色 → 绿色双色 → 蓝色多色定制 → 紫色复杂艺术 → 金色传说图案
2. **材质特殊性递进**: 哑光 → 磨砂 → 金属光泽 → 特殊材质（碳纤维）→ 顶级材质（全息、发光）
3. **动态效果**: 仅金色传说涂装有动态效果（发光边缘、全息图案、击杀特效）

**特效设计**:
- **发光边缘** (金色专属): 武器边缘有微弱发光效果，UE5 Lumen支持
- **全息图案** (金色专属): 涂装图案有全息投影效果（如龙纹会"浮动"）
- **击杀特效** (金色可选): 使用金色涂装武器击杀敌人时，特殊音效或视觉反馈

**品质即时识别**: 玩家看到涂装3秒内能判断品质（通过颜色、图案复杂度、是否有特效）

### 6.3 涂装应用流程

**应用流程**:
1. 在工作台选择武器
2. 点击"涂装"选项
3. 浏览涂装库（显示缩略图、品质标识）
4. 选择涂装 → 360度预览效果
5. 确认应用 → 立即生效

**涂装更换**:
- 无消耗成本：涂装可重复使用
- 立即返回库存：移除的涂装不消失
- 无冷却时间：随时更换

**涂装可见性**:
- 玩家在第一人称视角可见（至少枪身、弹匣、枪托可见）
- 其他玩家击杀或捡起该武器时也能看到（增强展示价值）
- 涂装在不同光照下有正确的反射和阴影效果（UE5 Lumen）

### 6.4 涂装获取途径

- **任务奖励**: 阵营任务完成后奖励专属涂装
- **商人交易**: 使用货币或其他物资交换涂装
- **击杀/搜刮**: 捡到其他玩家的定制涂装武器，撤离后获得涂装
- **特殊活动**: 限时活动提供限定主题涂装（可选）

---

## 7. 阵营专属内容

### 7.1 阵营组件特色

基于 research.md 研究5的阵营差异化设计，三大阵营各有专属组件和风格：

| 阵营 | 设计理念 | 组件特色 | 属性偏向 | 解锁条件 |
|------|---------|---------|---------|---------|
| **秩序同盟** | 精准可靠 | 军用标准化组件 | 高精准度、低后坐力、中等机动性 | 声望等级2 |
| **荒野猎人** | 火力优先 | 激进高伤害组件 | 高射速、高伤害、高后坐力 | 声望等级2 |
| **黎明贸易团** | 平衡多用途 | 中庸实用组件 | 平衡属性、无明显短板 | 声望等级2 |

**专属组件示例**:

**秩序同盟专属**:
- 精准射手握把（紫色）: +15%精准度，-8%射速，体现精准理念
- 军用标准瞄具（蓝色）: +10%精准度，+5%稳定性，可靠性优先

**荒野猎人专属**:
- 重型枪口制退器（紫色）: +20%后坐力控制，+15%武器重量，+10%噪音，火力优先
- 高容弹匣Pro（蓝色）: +50%弹药容量，-15%换弹速度，火力持久

**黎明贸易团专属**:
- 多用途握把（金色）: +8%精准度，+8%机动性，无负面，平衡设计
- 通用瞄具（蓝色）: +8%精准度，+8%瞄准速度，适应多种场景

**设计原则**:
- 专属组件不是"数值更强"，而是"风格更明确"
- 每个阵营3-5个专属组件（不过度分裂内容）
- 专属组件体现阵营战斗哲学差异

### 7.2 枪匠NPC设计

三大阵营各有枪匠NPC，提供对话、任务和专属组件：

**秩序同盟枪匠** - "老兵"（Viktor）:
- 定位: 老派军械师，曾是特警队成员
- 对话风格: 严肃专业，强调纪律和精准
- 提供服务: 标准化军用组件、精准配置推荐
- 委托任务: 道德导向（如"搜刮瞄具支援新兵训练"）

**荒野猎人枪匠** - "铁锤"（Hammer）:
- 定位: 实战派改装者，前雇佣军
- 对话风格: 粗犷直接，强调火力和生存
- 提供服务: 激进配置、高火力组件
- 委托任务: 战斗导向（如"使用改装武器击杀50个僵尸"）

**黎明贸易团枪匠** - "商人"（Trader）:
- 定位: 中立商人，前枪店老板
- 对话风格: 务实客气，强调实用和性价比
- 提供服务: 最广泛的组件选择、价格公道但略高
- 委托任务: 商业导向（如"收集不同品质组件建立库存"）

### 7.3 委托任务设计

每个阵营枪匠提供委托任务，完成后解锁奖励：

**秩序同盟任务**:
- "搜刮5个蓝色品质瞄具并上交"
  - 奖励: 解锁"热成像瞄具"配方或所有组件价格-10%
- "使用精准配置击杀20个僵尸，头部命中率>60%"
  - 奖励: 解锁精准射手握把（紫色专属）

**荒野猎人任务**:
- "使用改装武器击杀50个僵尸"
  - 奖励: 解锁重型制退器（紫色专属）
- "在单局中使用火力配置击杀10个敌人"
  - 奖励: 弹药补给折扣，高容弹匣Pro

**黎明贸易团任务**:
- "收集3种不同品质的组件并上交"
  - 奖励: 所有组件价格-15%（最大折扣）
- "使用多用途配置完成5次成功撤离"
  - 奖励: 解锁稀有组件交易权限，多用途握把

**任务流程**:
1. 与枪匠NPC对话 → 接取任务
2. 任务追踪器显示进度（如0/5）
3. 完成任务条件 → 返回枪匠处交任务
4. 枪匠播放感谢对话 → 获得奖励
5. 可接取下一阶段任务（如有）

---

## 8. UI/UX设计

### 8.1 工作台界面布局

**主界面结构**:
```
┌──────────────────────────────────────────────────────────┐
│  枪匠工作台                         [关闭] [帮助]         │
├──────────────────────────────────────────────────────────┤
│                                                            │
│  ┌────────────────┐     ┌───────────────────────────┐   │
│  │                │     │  当前武器: AK步枪          │   │
│  │                │     │  当前配置: 默认配置        │   │
│  │   3D旋转视图    │     │                           │   │
│  │   [武器模型]    │     │  [改造] [配置] [涂装]     │   │
│  │                │     │                           │   │
│  │  [可360度旋转]  │     │  ┌─────────────────────┐ │   │
│  │                │     │  │ 槽位: 枪口  瞄具     │ │   │
│  └────────────────┘     │  │      弹匣  握把     │ │   │
│                         │  │      附件  枪托     │ │   │
│                         │  └─────────────────────┘ │   │
│                         │                           │   │
│                         │  属性雷达图:              │   │
│                         │  [五维属性可视化]          │   │
│                         └───────────────────────────┘   │
│                                                            │
│  我的武器库: [显示拥有的武器列表]                          │
│  ┌──────┐ ┌──────┐ ┌──────┐                             │
│  │ AK-47│ │ M4A1 │ │ MP5  │ ...                         │
│  └──────┘ └──────┘ └──────┘                             │
└──────────────────────────────────────────────────────────┘
```

**视觉风格**:
- 工业风格的改装台背景
- 散落的工具和配件箱
- 昏黄的工作灯照亮武器和组件（营造末世氛围）

### 8.2 操作流程设计

**基础改造流程**（7步）:
1. **进入工作台**: 在安全区找到枪匠工作台，点击交互
2. **选择武器**: 从"我的武器库"选择要改造的武器
3. **浏览组件**: 点击槽位（如"握把"），显示可用组件列表
4. **安装/替换/移除**: 选择组件 → 预览效果 → 确认操作
5. **预览效果**: 查看属性雷达图变化、3D模型更新
6. **保存配置** (可选): 为当前配置命名并保存
7. **确认改造**: 最终确认，退出工作台

**视觉反馈**:
- 组件安装: 播放金属卡扣声、瞄具卡入导轨的动画
- 属性变化: 绿色箭头（增益）、红色箭头（减益）
- 品质标识: 边框颜色和光效体现品质（白色边框 → 金色光效）

### 8.3 错误处理

**兼容性冲突**:
- 提示: "该瞄具需要战术导轨，当前握把不提供导轨"
- 解决方案: "建议先安装XX握把"
- 一键解决: 提供"应用推荐配置"自动安装依赖组件

**库存不足**:
- 提示: "该组件不在库存中"
- 引导: "需要搜刮：战术前握把 x1"
- 替代方案: 显示库存中同槽位的其他组件

**误操作撤销**:
- 改造过程中提供"撤销上一步"按钮（限确认前）
- 组件可随时移除，返回库存，无惩罚成本

### 8.4 新手引导

**首次使用提示**:
- 进入工作台时显示简短教程（"点击槽位选择组件"）
- 关键操作高亮（如"预览"按钮、"确认"按钮）
- 可跳过，老手玩家不会被打扰

**系统推荐引导**:
- 新手玩家优先显示"新手友好配置"
- 提示配置理念和适用场景
- 一键应用，3秒上手

---

## 9. 组件获取机制

### 9.1 获取途径

组件和涂装通过游戏内玩法获得，无氪金获得性能优势：

| 获取途径 | 说明 | 品质范围 | 获取频率 |
|---------|------|---------|---------|
| **搜刮掉落** | 在危险区域的武器箱、军事据点搜刮 | 白色-金色 | 主要途径 |
| **任务奖励** | 完成阵营任务、枪匠委托任务 | 绿色-金色 | 定向获取 |
| **商人交易** | 使用货币或其他物资交换 | 白色-紫色 | 补充途径 |
| **拆解兑换** | 拆解重复组件获得材料，用材料兑换 | 白色-蓝色 | 可选机制 |
| **战利品掠夺** | 捡到其他玩家的已改装武器，撤离后获得武器和上面的所有组件 | 取决于武器配置 | 额外奖励途径 |

### 9.2 掉落设计

基于 research.md 研究6的组件获取频率与掉落概率：

**品质掉落概率表（按区域难度）**:

| 品质 | 低难度区域 | 中难度区域 | 高难度区域 | Boss掉落 |
|------|-----------|-----------|-----------|---------|
| **白色** | 60% | 40% | 20% | 0% |
| **绿色** | 30% | 35% | 30% | 10% |
| **蓝色** | 8% | 20% | 35% | 30% |
| **紫色** | 2% | 4% | 12% | 40% |
| **金色** | 0% | 1% | 3% | 20% |

**每局预期获取量**:

| 难度区域 | 搜刮点数 | 预期组件数 | 蓝色以上数量 |
|---------|---------|-----------|------------|
| **低难度** | 10-12个 | 6-8个 | 1-2个 |
| **中难度** | 12-15个 | 7-10个 | 3-4个 |
| **高难度** | 15-20个 | 10-15个 | 5-8个 |

**设计原则**:
- 基础保障: 低难度区域每局也能获得1-2个蓝色组件（满足"有价值物品"目标）
- 稀有惊喜: 金色组件掉落率<5%，保持稀缺性
- 风险回报: 高难度区域显著提升蓝色/紫色/金色掉落率

### 9.3 视觉反馈

**品质光效**:
- 白色组件: 无特效
- 绿色组件: 淡绿色光晕
- 蓝色组件: 蓝色光效（"蓝光"闪烁）
- 紫色组件: 紫色光柱
- 金色组件: 金色光柱+特殊音效

**拾取提示**:
- 显示组件名称和品质
- 显示核心属性（如"战术前握把 [蓝色] +12%后坐力控制"）
- 拾取后背包中显示数量

**库存更新**:
- 成功撤离后，新获得组件有"新物品"标记
- 在工作台查看时高亮显示"新获得"
- 可查看详细属性和3D模型

### 9.4 库存管理

**库存功能**:
- 库存上限: 每类组件上限50个（防止无限囤积）
- 筛选排序: 按品质、按属性、按获取时间排序
- 搜索功能: 搜索"后坐力"显示所有影响后坐力的组件
- 收藏功能: 标记常用组件，优先显示

**库存保护**:
- 组件和涂装存放在安全区
- 玩家死亡时，仓库中的组件库存不会丢失
- 仅携带的武器及其上的组件会丢失（被其他玩家拾取）

### 9.5 战利品获取机制

**携带组件武器掉落**:

玩家在危险区域击杀敌人或捡到已改装的武器时，该武器上的所有组件都会一并获得。这是FR-011需求的核心机制，提供额外的组件获取途径。

**获取流程**:
```
发现已改装武器（地上掉落或击杀敌人）
  ↓
拾取武器（显示武器配置信息）
  ↓
背包中显示：武器 + 已安装的组件列表
  ↓
成功撤离
  ↓
武器进入武器库
  ↓
组件自动拆分进入组件库存（可选择保留配置或拆下）
```

**玩家选择**:
- **保留武器配置**: 武器保持原有改装，可直接使用
- **拆下组件**: 将武器上的组件拆下，加入组件库存，用于其他武器

**获取示例**（基于 spec.md 用户故事2验收场景4）:
- 玩家捡到一把已改装的敌人AK步枪
- 该武器携带：绿色红点瞄具 + 白色补偿器
- 成功撤离后获得：
  - AK步枪 × 1（武器库）
  - 绿色红点瞄具 × 1（组件库存）
  - 白色补偿器 × 1（组件库存）

**设计意图**:
- 提供额外的组件获取途径，增加战斗和搜刮的动力
- 鼓励击杀携带高品质组件武器的敌人（高风险高回报）
- 增加"意外惊喜"的收获感（捡到金色组件配置的武器）
- 服务于"屯积的正反馈快感"设计支柱

**平衡考虑**:
- 已改装武器的掉落概率较低（约10-20%的敌人携带改装武器）
- 敌人武器的组件品质取决于区域难度（低难度区域多为白色/绿色）
- 高难度区域的敌人可能携带蓝色/紫色组件（额外激励）

---

## 10. 设计支柱对齐验证

### 10.1 支柱1：保证撤离的良性循环

**体现方式**:
- 枪匠系统仅在安全区可用，不干扰战斗中的"搜-打-撤"循环
- 组件库存独立于携带武器，死亡不丢失，保证"东山再起"路径
- 通过配置优化提升战斗效率，间接支持撤离成功率

**对齐结论**: ✅ 完全对齐

### 10.2 支柱2：屯积的正反馈快感

**体现方式**:
- 组件和涂装作为有价值的搜刮物品，丰富"屯屯鼠"体验
- 品质分级系统（白<绿<蓝<紫<金）创造"开箱"般期待感
- 蓝光特效、"新物品"标记提供即时正反馈
- 配置保存系统让玩家看到"选择权"和"仓库帝国"不断扩张

**对齐结论**: ✅ 完全对齐，直接服务此支柱

### 10.3 支柱3：电影级视觉震撼

**体现方式**:
- 3D旋转展示、高细节组件模型（UE5 Nanite）
- 涂装系统的金色传说级动态效果（全息图案、发光边缘）
- 工作台界面的工业风格、昏黄灯光营造末世氛围
- 组件安装动画、属性雷达图提供流畅视觉反馈

**对齐结论**: ✅ 完全对齐

### 10.4 支柱4：可接近的硬核体验

**体现方式**:
- 预设配置（新手友好/远程精准/近战突击）降低新手门槛
- 系统推荐引导新手选择，避免选择困难
- 6槽位设计保留深度（每槽位3-8选择），但不像《塔科夫》需要导轨转接件
- 80/20兼容性原则：80%组件无限制，20%有依赖（增加深度但不强制）
- 渐进式成长路径（白色→金色）提供清晰的进度感

**对齐结论**: ✅ 完全对齐

---

## 11. 参考游戏分析

### 11.1 借鉴的设计

**《逃离塔科夫》**:
- ✅ 借鉴: 深度的槽位设计、真实的性能权衡
- ❌ 简化: 避免过度复杂的兼容性（无需转接件、导轨系统）

**《使命召唤：现代战争》**:
- ✅ 借鉴: 5槽位清晰设计、属性可视化展示、预设配置系统
- ✅ 应用: 我们的6槽位设计类似但更丰富

**《彩虹六号：围攻》**:
- ✅ 借鉴: 配件影响玩法而非纯数值（如消音器降低声音暴露）
- ✅ 应用: 我们的消音器同样影响战术（-50%噪音，-10%射程）

**《CS:GO》**:
- ✅ 借鉴: 涂装纯美观不影响数值、品质分级创造收集动力
- ✅ 应用: 我们的涂装系统完全采用此设计理念

### 11.2 设计差异化

**vs《逃离塔科夫》**:
- 简化兼容性（80/20原则 vs 100%复杂依赖）
- 预设配置降低门槛（新手友好 vs 陡峭学习曲线）
- 6槽位 vs 15+槽位（保留深度但不过度）

**vs《使命召唤：现代战争》**:
- 更硬核的权衡设计（所有组件都有负面 vs 部分纯增益）
- 更稀缺的获取途径（搜刮掉落 vs 等级解锁）
- 更深的阵营系统（3个阵营专属 vs 无阵营）

---

## 12. 世界观定位

### 12.1 末世背景设定

在《归途》2028年末世设定中，枪匠工作站设立在三大阵营的安全区：

**组件来源背景**:
- 病毒爆发前的军火库、警察局、枪店、私人收藏
- 经过3年的搜刮，品相完好的高品质组件极其稀缺
- 白色/绿色组件: 民用市场大众化产品（常见）
- 蓝色/紫色组件: 军用或专业级产品（稀有）
- 金色组件: 军队精英单位配备（极其稀缺）

**枪匠工作站设定**:
- 三大阵营各自设立枪匠工作站
- 利用搜刮到的军用配件和民用改装件进行模块化改造
- 枪匠NPC提供专业改造服务和委托任务

---

**文档版本**: 1.0.0 | **创建日期**: 2025-11-14
**最后更新**: 2025-11-14 | **状态**: 初稿完成
